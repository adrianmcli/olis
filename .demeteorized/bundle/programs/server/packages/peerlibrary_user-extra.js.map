{"version":3,"sources":["meteor://ðŸ’»app/packages/peerlibrary_user-extra/packages/peerlibrary_user-extra.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/packages/peerlibrary_user-extra.js","sourcesContent":["(function () {\n\n///////////////////////////////////////////////////////////////////////////////////////\n//                                                                                   //\n// packages/peerlibrary:user-extra/server.coffee.js                                  //\n//                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////\n                                                                                     //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar originalPublish, publishCurrentContext,\n  __slice = [].slice;\n\npublishCurrentContext = new Meteor.EnvironmentVariable();\n\noriginalPublish = Meteor.publish;\n\nMeteor.publish = function(name, func) {\n  return originalPublish(name, function() {\n    var args;\n    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    return publishCurrentContext.withValue({\n      userId: this.userId\n    }, (function(_this) {\n      return function() {\n        return func.apply(_this, args);\n      };\n    })(this));\n  });\n};\n\nMeteor.userId = function() {\n  var currentContext, currentInvocation;\n  currentInvocation = DDP._CurrentInvocation.get();\n  if (currentInvocation) {\n    return currentInvocation.userId;\n  }\n  currentContext = publishCurrentContext.get();\n  if (currentContext) {\n    return currentContext.userId;\n  }\n  throw new Error(\"Meteor.userId() not invoked from a method or publish function.\");\n};\n\nMeteor.users.deny({\n  update: function() {\n    return true;\n  }\n});\n///////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n///////////////////////////////////////////////////////////////////////////////////////\n//                                                                                   //\n// packages/peerlibrary:user-extra/lib.coffee.js                                     //\n//                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////\n                                                                                     //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nMeteor.user = function(userId, fields) {\n  if (!fields && _.isObject(userId)) {\n    fields = userId;\n    userId = null;\n  }\n  if (userId == null) {\n    userId = Meteor.userId();\n  }\n  if (fields == null) {\n    fields = {};\n  }\n  if (!userId) {\n    return null;\n  }\n  return Meteor.users.findOne({\n    _id: userId\n  }, {\n    fields: fields\n  });\n};\n///////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n"]}